# Copyright 2018 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/package.gni")

if (target_cpu == "x64") {
  executable("bin") {
    output_name = "thermd"

    sources = [
      "thermd.cc",
    ]
    deps = [
      "//zircon/public/lib/async",
      "//zircon/public/lib/async-default",
      "//zircon/public/lib/async-loop",
      "//zircon/public/lib/async-loop-cpp",
      "//zircon/public/lib/fdio",
      "//zircon/public/lib/trace-engine",
      "//zircon/public/lib/trace-provider",
      "//zircon/public/lib/zx",
    ]
  }
}

package("thermd") {
  if (target_cpu == "x64") {
    deps = [
      ":bin",
    ]

    binary = "thermd"

    meta = [
      {
        path = rebase_path("meta/sandbox")
        dest = "sandbox"
      },
    ]
  } else {
    # An empty system_image package is really nothing at all.
    system_image = true
  }
}
